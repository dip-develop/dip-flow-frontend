name: theteam
version: 1.0.0
summary: TheTeam
description: TheTeam

confinement: strict
base: core18
grade: stable

architectures:
  - build-on: [ amd64 ]
  - build-on: [ arm64 ]

slots:
  dbus-protected-person-notes:
    interface: dbus
    bus: session
    name: run.theteam.app

apps:
  protected-person-notes:
    command: theteam
    extensions: [flutter-stable]
    plugs:
      - network
      - password-manager-service
      - home
      - mount-observe
      - desktop
    slots:
      - dbus-theteam
parts:
  protected-person-notes:
    source: .
    plugin: flutter
    flutter-target: lib/main.dart
    override-build: |
      flutter clean
      flutter pub get
      flutter pub run build_runner build -d
      snapcraftctl build
    build-packages:
      - libsecret-1-dev
      - libjsoncpp-dev
    stage-packages:
      - libjsoncpp-dev
      - libsecret-1-dev
      - libgnome-keyring-common
      - libgnome-keyring0
      